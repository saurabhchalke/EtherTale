<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1473.9516795609748 849.7829336723412" width="4421.855038682925" height="2549.3488010170236">
  <!-- svg-source:excalidraw -->
  
  <defs>
    <style class="style-fonts">
      @font-face {
        font-family: "Virgil";
        src: url("https://excalidraw.com/Virgil.woff2");
      }
      @font-face {
        font-family: "Cascadia";
        src: url("https://excalidraw.com/Cascadia.woff2");
      }
      @font-face {
        font-family: "Assistant";
        src: url("https://excalidraw.com/Assistant-Regular.woff2");
      }
    </style>
    
  </defs>
  <rect x="0" y="0" width="1473.9516795609748" height="849.7829336723412" fill="#ffffff"></rect><g stroke-linecap="round" transform="translate(305.0938053366018 342.91267861253846) rotate(0 114.33810379333897 33.80052213620297)"><path d="M16.9 0 C57.53 -1.87, 99.09 -0.68, 211.78 0 M16.9 0 C82.55 1.51, 148.92 1.5, 211.78 0 M211.78 0 C223.1 -1.04, 229.77 6.62, 228.68 16.9 M211.78 0 C224.37 0.26, 228.95 5.67, 228.68 16.9 M228.68 16.9 C227.38 24.03, 229.65 29.38, 228.68 50.7 M228.68 16.9 C229.34 30.33, 229.53 43.83, 228.68 50.7 M228.68 50.7 C228.16 62.5, 222.59 66.36, 211.78 67.6 M228.68 50.7 C229.96 61.89, 222.26 69.56, 211.78 67.6 M211.78 67.6 C139.81 65.29, 69.82 66.76, 16.9 67.6 M211.78 67.6 C155.59 67.48, 100.16 67.86, 16.9 67.6 M16.9 67.6 C6.87 67.4, -0.02 63.87, 0 50.7 M16.9 67.6 C5.55 69.05, 0.8 60.23, 0 50.7 M0 50.7 C-0.1 44.1, 0.52 37.54, 0 16.9 M0 50.7 C-0.42 42.13, 0.05 31.42, 0 16.9 M0 16.9 C-1.19 7.08, 6.43 0.12, 16.9 0 M0 16.9 C0 7.76, 7.86 -1.36, 16.9 0" stroke="#1971c2" stroke-width="1" fill="none"></path></g><g transform="translate(352.5119872549408 364.21320074874166) rotate(0 66.919921875 12.5)"><text x="66.919921875" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#e03131" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">ProcessTopup</text></g><g stroke-linecap="round"><g transform="translate(405.49383508348114 257.54246773847444) rotate(0 -2.7202546113021526 40.81570261330012)"><path d="M0 0.44 C-0.69 13.93, -3.96 67.51, -4.86 81.21 M-1.46 -0.37 C-2.19 13.26, -4.72 69, -5.5 82.53" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(405.49383508348114 257.54246773847444) rotate(0 -2.7202546113021526 40.81570261330012)"><path d="M-14.32 53.85 C-11.39 61.73, -10.7 67.69, -5.5 82.53 M-14.32 53.85 C-10.7 64.25, -6.8 76.25, -5.5 82.53" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(405.49383508348114 257.54246773847444) rotate(0 -2.7202546113021526 40.81570261330012)"><path d="M6.17 54.89 C4.16 62.52, -0.08 68.23, -5.5 82.53 M6.17 54.89 C1.93 65.06, -2.02 76.66, -5.5 82.53" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g></g><mask></mask><g transform="translate(452.0787100794711 295.7899274158285) rotate(0 26.379974365234375 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Input</text></g><g transform="translate(463.36494619147345 444.35683512232436) rotate(0 34.84996032714844 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Output</text></g><g stroke-linecap="round"><g transform="translate(402.66037233670943 429.6719670239877) rotate(0 0.2229014099474398 20.511057519056294)"><path d="M0.41 0.45 C0.49 7.16, 0.4 33.93, 0.46 40.74 M-0.04 0.2 C-0.04 7.22, -0.06 34.6, 0.04 41.29" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(402.66037233670943 429.6719670239877) rotate(0 0.2229014099474398 20.511057519056294)"><path d="M-7.09 22.05 C-4.04 27.85, -3.23 34.17, 0.04 41.29 M-7.09 22.05 C-4.48 28.77, -2.5 35.54, 0.04 41.29" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(402.66037233670943 429.6719670239877) rotate(0 0.2229014099474398 20.511057519056294)"><path d="M6.94 21.97 C5.76 27.85, 2.34 34.19, 0.04 41.29 M6.94 21.97 C4.65 28.73, 1.73 35.52, 0.04 41.29" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g></g><mask></mask><g stroke-linecap="round" transform="translate(305.8244266247631 495.2353693232585) rotate(0 110.05757116156974 32.17741655087593)"><path d="M16.09 0 C85.53 1.05, 158.03 1.11, 204.03 0 M16.09 0 C73.68 0.08, 132.65 -0.7, 204.03 0 M204.03 0 C214.73 0.93, 218.3 7.29, 220.12 16.09 M204.03 0 C215.82 -0.58, 221.29 5.45, 220.12 16.09 M220.12 16.09 C220.69 27.55, 218.92 41.02, 220.12 48.27 M220.12 16.09 C220.65 25.67, 219.25 34.67, 220.12 48.27 M220.12 48.27 C219.27 58.96, 215.39 64.08, 204.03 64.35 M220.12 48.27 C222.11 58.75, 213.77 64.55, 204.03 64.35 M204.03 64.35 C149.29 65.5, 96.87 65.44, 16.09 64.35 M204.03 64.35 C134.83 62.14, 67.68 62.75, 16.09 64.35 M16.09 64.35 C5.58 64.6, 0.48 58.42, 0 48.27 M16.09 64.35 C6.42 63.22, -0.61 60.37, 0 48.27 M0 48.27 C1.75 38.73, 0.42 27.61, 0 16.09 M0 48.27 C-0.14 36.28, 0.47 22.61, 0 16.09 M0 16.09 C0.93 5.16, 4.53 1.35, 16.09 0 M0 16.09 C-1.49 3.81, 5.48 0.78, 16.09 0" stroke="#1971c2" stroke-width="1" fill="none"></path></g><g transform="translate(346.6220566852586 514.9127858741344) rotate(0 69.25994110107422 12.5)"><text x="69.25994110107422" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#2f9e44" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">newStateRoot</text></g><g transform="translate(570.3737259406327 257.96351260310803) rotate(0 49.669944763183594 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Processing</text></g><g stroke-linecap="round"><g transform="translate(574.0950351317991 385.6055951384592) rotate(0 41.82364155770529 -19.566703345299402)"><path d="M0.14 0.02 C13.79 -6.5, 68.74 -32.34, 82.58 -39 M-1.24 -1.01 C12.71 -7.33, 70.84 -31.05, 84.74 -37.39" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(574.0950351317991 385.6055951384592) rotate(0 41.82364155770529 -19.566703345299402)"><path d="M62.87 -16.85 C70.71 -26, 78.72 -32.34, 84.74 -37.39 M62.87 -16.85 C67.06 -20.78, 73.54 -26.78, 84.74 -37.39" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(574.0950351317991 385.6055951384592) rotate(0 41.82364155770529 -19.566703345299402)"><path d="M54.78 -35.72 C65.53 -38.12, 76.44 -37.72, 84.74 -37.39 M54.78 -35.72 C60.86 -35.28, 69.22 -36.89, 84.74 -37.39" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g></g><mask></mask><g stroke-linecap="round" transform="translate(296.2022097980471 180.8810513443027) rotate(0 110.05757116156974 32.17741655087593)"><path d="M16.09 0 C54.49 0.7, 96.49 -1.09, 204.03 0 M16.09 0 C91.09 0.51, 165.77 0.6, 204.03 0 M204.03 0 C214.24 0.53, 219.66 4.13, 220.12 16.09 M204.03 0 C216.04 -0.08, 219.33 7.32, 220.12 16.09 M220.12 16.09 C219.12 26.97, 220.1 40.16, 220.12 48.27 M220.12 16.09 C219.97 25.38, 220.3 34.96, 220.12 48.27 M220.12 48.27 C221.35 58.79, 214.73 66.25, 204.03 64.35 M220.12 48.27 C220.03 60.44, 215.55 62.62, 204.03 64.35 M204.03 64.35 C165.74 64.74, 128.44 65, 16.09 64.35 M204.03 64.35 C152.78 64.03, 102.27 62.48, 16.09 64.35 M16.09 64.35 C4.18 65.8, 0.8 59.11, 0 48.27 M16.09 64.35 C5.37 66.48, 2.23 57.63, 0 48.27 M0 48.27 C-1.03 39, -0.41 27.04, 0 16.09 M0 48.27 C0.26 36.78, -0.59 24.75, 0 16.09 M0 16.09 C-0.49 5.05, 5.93 0.28, 16.09 0 M0 16.09 C-1.92 5.47, 7.15 -0.58, 16.09 0" stroke="#1971c2" stroke-width="1" fill="none"></path></g><g transform="translate(343.31984718276135 200.55846789517864) rotate(0 62.93993377685547 12.5)"><text x="62.93993377685547" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">messageType</text></g><g stroke-linecap="round" transform="translate(693.7410533145616 71.95385055299676) rotate(0 124.50711860321496 67.5)"><path d="M32 0 C89.24 2.61, 142.13 2.7, 217.01 0 M32 0 C87.91 0.02, 144.11 -0.87, 217.01 0 M217.01 0 C239.46 -0.07, 248.33 12.37, 249.01 32 M217.01 0 C239.82 0.09, 247.28 9.51, 249.01 32 M249.01 32 C248.73 52.05, 248.8 67.78, 249.01 103 M249.01 32 C249.56 53.79, 248.94 76.74, 249.01 103 M249.01 103 C248.94 125.59, 239.04 133.49, 217.01 135 M249.01 103 C246.75 122.49, 238.55 134.57, 217.01 135 M217.01 135 C158.94 136.37, 101.04 134.91, 32 135 M217.01 135 C149.82 133.97, 84.21 133.31, 32 135 M32 135 C10.67 136.85, 1.94 123.15, 0 103 M32 135 C11.06 136.47, 1.79 123.39, 0 103 M0 103 C1.42 77.1, -1.28 53.89, 0 32 M0 103 C0.32 79.13, 0.85 55.72, 0 32 M0 32 C-1.67 10.76, 12.22 -0.5, 32 0 M0 32 C-0.75 9.29, 12.46 -0.11, 32 0" stroke="#1971c2" stroke-width="1" fill="none"></path></g><g stroke-linecap="round" transform="translate(10 378.0046382852429) rotate(0 110.05757116156974 32.17741655087593)"><path d="M16.09 0 C68.15 -1.73, 122.06 0.23, 204.03 0 M16.09 0 C72.79 0.93, 130.64 0.81, 204.03 0 M204.03 0 C216.49 -0.21, 219.26 5.53, 220.12 16.09 M204.03 0 C214.53 1.05, 221.54 5.13, 220.12 16.09 M220.12 16.09 C221.68 26.41, 218.91 33.37, 220.12 48.27 M220.12 16.09 C220.25 23.29, 220.38 29.96, 220.12 48.27 M220.12 48.27 C221.04 58.01, 214.22 65.55, 204.03 64.35 M220.12 48.27 C220.6 56.82, 213.39 66.02, 204.03 64.35 M204.03 64.35 C142.02 66.3, 75.13 64.7, 16.09 64.35 M204.03 64.35 C136.11 63.48, 66.85 64.26, 16.09 64.35 M16.09 64.35 C4.07 63, 0.1 59.67, 0 48.27 M16.09 64.35 C3.52 64.66, -0.57 58.63, 0 48.27 M0 48.27 C0.05 39.26, -0.55 26.5, 0 16.09 M0 48.27 C-0.68 40.49, 0.03 33.16, 0 16.09 M0 16.09 C0.1 4.04, 3.7 -1.75, 16.09 0 M0 16.09 C-1.8 7.18, 3.68 -2.17, 16.09 0" stroke="#f08c00" stroke-width="1" fill="none"></path></g><g transform="translate(39.117652643503334 385.1820548361188) rotate(0 80.9399185180664 25)"><text x="80.9399185180664" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#f08c00" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">parameter: </text><text x="80.9399185180664" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#f08c00" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">stateTreeDepth</text></g><g stroke-linecap="round"><g transform="translate(251.16626846986253 399.0184776221963) rotate(0 22.27889688945629 -12.101152245474623)"><path d="M0.77 0.05 C8.11 -4.26, 36.44 -20.76, 43.65 -24.81 M-0.29 -0.97 C7.47 -4.61, 38.67 -19.93, 45.89 -23.59" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(251.16626846986253 399.0184776221963) rotate(0 22.27889688945629 -12.101152245474623)"><path d="M28.41 -5.22 C32.98 -11.73, 36.55 -15.94, 45.89 -23.59 M28.41 -5.22 C34.44 -10.78, 38.36 -16.08, 45.89 -23.59" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(251.16626846986253 399.0184776221963) rotate(0 22.27889688945629 -12.101152245474623)"><path d="M20.69 -20.75 C27.45 -23.18, 33.07 -23.26, 45.89 -23.59 M20.69 -20.75 C29.07 -21.66, 35.3 -22.32, 45.89 -23.59" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g></g><mask></mask><g stroke-linecap="round" transform="translate(60.19856941201192 185.788439500393) rotate(0 110.05757116156974 32.17741655087593)"><path d="M16.09 0 C62.22 -1.13, 107.83 -1.02, 204.03 0 M16.09 0 C59.03 -0.2, 102.34 -1.15, 204.03 0 M204.03 0 C215.74 0.57, 220.52 4.29, 220.12 16.09 M204.03 0 C212.68 -0.24, 220.27 4.96, 220.12 16.09 M220.12 16.09 C220.93 26.13, 218.82 35.82, 220.12 48.27 M220.12 16.09 C219.02 25.03, 219.41 34.5, 220.12 48.27 M220.12 48.27 C221.81 60.3, 213 63.5, 204.03 64.35 M220.12 48.27 C220.78 58.91, 215.13 64.01, 204.03 64.35 M204.03 64.35 C135.41 62.57, 64.31 62.6, 16.09 64.35 M204.03 64.35 C143.56 64.83, 81.93 65.41, 16.09 64.35 M16.09 64.35 C5.35 63.47, -1.37 57.66, 0 48.27 M16.09 64.35 C7.58 64.29, 0.84 58.06, 0 48.27 M0 48.27 C1.83 40.03, 0.06 35.6, 0 16.09 M0 48.27 C0.87 36.89, -0.34 25.69, 0 16.09 M0 16.09 C-0.54 4.56, 4.18 -1.01, 16.09 0 M0 16.09 C0.29 5.95, 4.53 0.96, 16.09 0" stroke="#1971c2" stroke-width="1" fill="none"></path></g><g transform="translate(91.20621381576916 205.46585605126893) rotate(0 79.0499267578125 12.5)"><text x="79.0499267578125" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">stateTreeIndex</text></g><g stroke-linecap="round" transform="translate(61.02652621204345 103.62790443973608) rotate(0 110.05757116156974 32.17741655087593)"><path d="M16.09 0 C84.72 -0.96, 156.62 2.27, 204.03 0 M16.09 0 C79.6 2.47, 144.96 1.77, 204.03 0 M204.03 0 C212.97 -1.42, 220.64 6.16, 220.12 16.09 M204.03 0 C215.65 -0.8, 221.47 4.18, 220.12 16.09 M220.12 16.09 C222.25 26.63, 221.03 42.69, 220.12 48.27 M220.12 16.09 C219.86 27.01, 220.12 37.07, 220.12 48.27 M220.12 48.27 C220.31 57.78, 216.15 65.92, 204.03 64.35 M220.12 48.27 C221.32 58.33, 213.33 63.58, 204.03 64.35 M204.03 64.35 C128.46 65.32, 54.07 61.95, 16.09 64.35 M204.03 64.35 C133.66 64.39, 64.65 64.32, 16.09 64.35 M16.09 64.35 C7.16 65.22, -0.02 58.97, 0 48.27 M16.09 64.35 C5.46 63.36, -0.22 59.93, 0 48.27 M0 48.27 C-0.53 40.11, 0.55 35.99, 0 16.09 M0 48.27 C-0.22 37.87, 0.48 25.23, 0 16.09 M0 16.09 C1.02 3.73, 6.8 1.45, 16.09 0 M0 16.09 C1.27 4.1, 5.83 -2.25, 16.09 0" stroke="#1971c2" stroke-width="1" fill="none"></path></g><g transform="translate(136.54412697566397 123.30532099061202) rotate(0 34.53997039794922 12.5)"><text x="34.53997039794922" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">amount</text></g><g stroke-linecap="round" transform="translate(296.65395800182364 102.15346082324095) rotate(0 110.05757116156974 32.17741655087593)"><path d="M16.09 0 C55.14 -1.16, 94.08 -2.35, 204.03 0 M16.09 0 C76.54 -1.06, 134.64 -1.64, 204.03 0 M204.03 0 C215.37 -1.89, 218.74 5.5, 220.12 16.09 M204.03 0 C212.64 -0.53, 219.84 6.99, 220.12 16.09 M220.12 16.09 C219.38 23.49, 220.82 32.02, 220.12 48.27 M220.12 16.09 C220.92 24.62, 221.19 31.29, 220.12 48.27 M220.12 48.27 C221.17 58.89, 214.37 66.19, 204.03 64.35 M220.12 48.27 C220.53 60.65, 216.41 63.94, 204.03 64.35 M204.03 64.35 C142.08 62.24, 80.72 61.56, 16.09 64.35 M204.03 64.35 C134.57 65.07, 65.97 66.85, 16.09 64.35 M16.09 64.35 C5.92 65.74, 0.71 60.74, 0 48.27 M16.09 64.35 C5.84 65.73, 0.95 60.21, 0 48.27 M0 48.27 C0.67 38.88, 1 31.88, 0 16.09 M0 48.27 C0.43 42.06, 0.51 35.17, 0 16.09 M0 16.09 C0.42 3.58, 3.97 -1.93, 16.09 0 M0 16.09 C1.8 3.5, 3.97 1.8, 16.09 0" stroke="#1971c2" stroke-width="1" fill="none"></path></g><g transform="translate(356.0415844002098 121.83087737411688) rotate(0 50.669944763183594 12.5)"><text x="50.669944763183594" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">numSignups</text></g><g stroke-linecap="round" transform="translate(67.15680909446849 20.86625005850692) rotate(0 110.05757116156974 32.17741655087593)"><path d="M16.09 0 C56.84 2.95, 99.44 0.05, 204.03 0 M16.09 0 C63.61 -0.03, 109.81 0.75, 204.03 0 M204.03 0 C212.77 -1.27, 218.12 5.09, 220.12 16.09 M204.03 0 C215.41 -2.28, 221.31 7.09, 220.12 16.09 M220.12 16.09 C220.57 28.06, 221.33 36.2, 220.12 48.27 M220.12 16.09 C219.78 28.08, 219.48 39.06, 220.12 48.27 M220.12 48.27 C221.97 59.03, 215.88 62.39, 204.03 64.35 M220.12 48.27 C221.92 60.78, 212.88 64.44, 204.03 64.35 M204.03 64.35 C136.73 64.3, 72.69 64.82, 16.09 64.35 M204.03 64.35 C158.21 62.65, 113.03 62.8, 16.09 64.35 M16.09 64.35 C5.6 63.02, 0.82 58.82, 0 48.27 M16.09 64.35 C3.77 63.32, -2.23 59.18, 0 48.27 M0 48.27 C1.68 35.83, 1.85 22.31, 0 16.09 M0 48.27 C-0.86 41.63, -0.38 33.18, 0 16.09 M0 16.09 C-1.55 6.51, 3.38 1.92, 16.09 0 M0 16.09 C-0.66 6.08, 7.37 -0.26, 16.09 0" stroke="#1971c2" stroke-width="1" fill="none"></path></g><g transform="translate(125.35442542205385 40.54366660938285) rotate(0 51.859954833984375 12.5)"><text x="51.859954833984375" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">stateLeaf</text></g><g stroke-linecap="round" transform="translate(303.1244971034396 19.788772031065037) rotate(0 110.05757116156974 32.17741655087593)"><path d="M16.09 0 C71.71 -1.13, 125.05 -1.11, 204.03 0 M16.09 0 C78.34 -0.43, 139.39 -1.58, 204.03 0 M204.03 0 C212.84 -1.02, 219.55 7.33, 220.12 16.09 M204.03 0 C213.15 -1, 219.5 7.47, 220.12 16.09 M220.12 16.09 C219.32 22.17, 219.16 28.57, 220.12 48.27 M220.12 16.09 C220.37 25.78, 219.87 34.74, 220.12 48.27 M220.12 48.27 C220.36 58.92, 214.76 63.83, 204.03 64.35 M220.12 48.27 C221.05 60.49, 215.71 64.38, 204.03 64.35 M204.03 64.35 C143.22 63.26, 80.22 64.7, 16.09 64.35 M204.03 64.35 C138.74 65.11, 73.3 65.2, 16.09 64.35 M16.09 64.35 C4.2 66.23, 1.17 57.34, 0 48.27 M16.09 64.35 C5.79 64.1, 1.78 60.64, 0 48.27 M0 48.27 C1.31 42.61, 1.8 36.71, 0 16.09 M0 48.27 C-1.03 37.74, 0.78 29.26, 0 16.09 M0 16.09 C0.04 7.08, 3.51 -0.5, 16.09 0 M0 16.09 C0.48 3.81, 4.83 0.47, 16.09 0" stroke="#1971c2" stroke-width="1" fill="none"></path></g><g transform="translate(310.81215707116166 26.96618858194097) rotate(0 102.36991119384766 25)"><text x="102.36991119384766" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">stateLeafPathEleme</text><text x="102.36991119384766" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">nts</text></g><g transform="translate(699.3682509583037 76.95385055299676) rotate(0 118.87992095947266 62.5)"><text x="118.87992095947266" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">1. Calculate amount and</text><text x="118.87992095947266" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">index by multiplying the </text><text x="118.87992095947266" y="50" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">input (stateTreeIndex </text><text x="118.87992095947266" y="75" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">and amount) * </text><text x="118.87992095947266" y="100" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">messageType - 1</text></g><g transform="translate(662.6824042255288 10) rotate(0 227.539794921875 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Note that a topup message type should be 2</text></g><g stroke-linecap="round" transform="translate(1024.6434808349804 52.43111348363209) rotate(0 110.05757116156974 80)"><path d="M32 0 C74.21 -0.15, 117.51 -0.22, 188.12 0 M32 0 C89.99 1.97, 146.41 2.13, 188.12 0 M188.12 0 C210.84 -0.48, 221.04 11.47, 220.12 32 M188.12 0 C210.62 0.44, 220.95 8.96, 220.12 32 M220.12 32 C221.29 50.49, 218.04 71.95, 220.12 128 M220.12 32 C221.41 62.16, 221.57 92.34, 220.12 128 M220.12 128 C220.51 148.28, 207.61 160.68, 188.12 160 M220.12 128 C220.31 147.67, 208.23 158.61, 188.12 160 M188.12 160 C154.62 158.86, 123.02 161.95, 32 160 M188.12 160 C146.5 159.89, 104.22 159.84, 32 160 M32 160 C12.35 160.32, 0.92 148.38, 0 128 M32 160 C9.95 160.28, 0.54 150.14, 0 128 M0 128 C-0.68 105.2, 1.02 82.03, 0 32 M0 128 C0.03 97.89, -0.87 68.18, 0 32 M0 32 C-1.2 9.81, 9.65 -0.95, 32 0 M0 32 C-0.18 9.66, 11.87 -0.76, 32 0" stroke="#1971c2" stroke-width="1" fill="none"></path></g><g transform="translate(1030.9511282904955 57.43111348363209) rotate(0 103.74992370605469 75)"><text x="103.74992370605469" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">this is to ensure </text><text x="103.74992370605469" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">that if we do not </text><text x="103.74992370605469" y="50" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">pass a topup </text><text x="103.74992370605469" y="75" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">message, then </text><text x="103.74992370605469" y="100" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">amount and index will</text><text x="103.74992370605469" y="125" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">be zero</text></g><g stroke-linecap="round"><g transform="translate(964.8394764394076 131.13467708755525) rotate(0 18.623357063721755 0.4400617351489018)"><path d="M-0.47 0.09 C5.87 0.16, 31.43 0.51, 37.66 0.62 M0.29 -0.33 C6.63 -0.22, 31.14 0.92, 37.43 1.18" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(964.8394764394076 131.13467708755525) rotate(0 18.623357063721755 0.4400617351489018)"><path d="M19.67 6.78 C23.86 6.28, 27.29 3.72, 37.43 1.18 M19.67 6.78 C24.43 5.65, 29.32 3.87, 37.43 1.18" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(964.8394764394076 131.13467708755525) rotate(0 18.623357063721755 0.4400617351489018)"><path d="M20.22 -5.95 C24.31 -3.56, 27.62 -3.22, 37.43 1.18 M20.22 -5.95 C24.89 -3.67, 29.63 -2.04, 37.43 1.18" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round" transform="translate(689.604523671558 240.80829830175344) rotate(0 140.63242792437597 49.070709675536364)"><path d="M24.54 0 C73.21 -0.32, 122.8 -0.38, 256.73 0 M24.54 0 C91.79 0.13, 160.4 0.24, 256.73 0 M256.73 0 C271.56 -0.29, 281.91 8.02, 281.26 24.54 M256.73 0 C272.38 -0.6, 283.27 8.81, 281.26 24.54 M281.26 24.54 C281.82 41.03, 279.95 60.31, 281.26 73.61 M281.26 24.54 C280.41 38.5, 280.33 52.64, 281.26 73.61 M281.26 73.61 C281.61 90.99, 272.53 97.05, 256.73 98.14 M281.26 73.61 C279.28 89.05, 274.52 98.04, 256.73 98.14 M256.73 98.14 C190.8 96.42, 128.04 96.59, 24.54 98.14 M256.73 98.14 C206.65 99.35, 157.79 99.67, 24.54 98.14 M24.54 98.14 C6.25 97.61, 0.98 90.13, 0 73.61 M24.54 98.14 C9.03 95.89, 0.6 89.72, 0 73.61 M0 73.61 C-1.82 63.8, -1.65 51.55, 0 24.54 M0 73.61 C0.54 57.13, 0.75 43.08, 0 24.54 M0 24.54 C1.91 10.06, 8.84 -0.77, 24.54 0 M0 24.54 C-1.76 7.32, 6.6 2.26, 24.54 0" stroke="#1971c2" stroke-width="1" fill="none"></path></g><g transform="translate(694.9570443693714 264.8790079772898) rotate(0 135.2799072265625 25)"><text x="135.2799072265625" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">2. Check that stateIndex </text><text x="135.2799072265625" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">&lt;= numSignups</text></g><g stroke-linecap="round" transform="translate(684.61126365493 347.69411862362404) rotate(0 171.64961777213057 30)"><path d="M15 0 C124.5 -1.05, 234.86 -0.26, 328.3 0 M15 0 C113.05 0.55, 211.63 -0.13, 328.3 0 M328.3 0 C336.39 0.68, 344.15 3.52, 343.3 15 M328.3 0 C339.21 1.8, 341.4 4.18, 343.3 15 M343.3 15 C344.45 23.21, 341.45 36.45, 343.3 45 M343.3 15 C343.49 22.8, 343.63 29.33, 343.3 45 M343.3 45 C344.29 54.52, 338.33 61.69, 328.3 60 M343.3 45 C343.56 55.95, 336.11 59.64, 328.3 60 M328.3 60 C217.01 59.23, 104.36 61.65, 15 60 M328.3 60 C262.77 58.67, 198.78 58.07, 15 60 M15 60 C6.93 60.13, 0.08 56.64, 0 45 M15 60 C4.46 61.69, -1.92 55.37, 0 45 M0 45 C1.51 33.68, 1.78 22.67, 0 15 M0 45 C-0.64 35.9, -0.64 27.3, 0 15 M0 15 C-1.88 4, 5.09 -1.11, 15 0 M0 15 C-1.32 3.76, 4.24 -1.85, 15 0" stroke="#1971c2" stroke-width="1" fill="none"></path></g><g transform="translate(698.5710315735449 352.69411862362404) rotate(0 157.68984985351562 25)"><text x="157.68984985351562" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">3. Check that the </text><text x="157.68984985351562" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">newCreditBalance is &lt; field size</text></g><g stroke-linecap="round" transform="translate(691.8161890962996 426.50247851512904) rotate(0 171.64961777213057 30)"><path d="M15 0 C140.06 -0.11, 265.18 1.64, 328.3 0 M15 0 C116.71 -0.81, 219.57 -1.04, 328.3 0 M328.3 0 C337.36 0.8, 343.66 3.11, 343.3 15 M328.3 0 C336.86 -1.61, 343.07 4.32, 343.3 15 M343.3 15 C342.67 19.9, 341.68 27.45, 343.3 45 M343.3 15 C344.02 21.15, 343.1 27.04, 343.3 45 M343.3 45 C344.85 53.53, 338.94 60.44, 328.3 60 M343.3 45 C345.54 52.97, 338.7 61.5, 328.3 60 M328.3 60 C263.35 57.08, 201.77 58.89, 15 60 M328.3 60 C233.65 61.6, 138.91 61.98, 15 60 M15 60 C6.47 59.4, 0.48 54.81, 0 45 M15 60 C5.5 58.14, -2.12 52.86, 0 45 M0 45 C-1.12 38.46, 1.1 27.4, 0 15 M0 45 C-0.22 37.65, -0.81 27.94, 0 15 M0 15 C1.66 3.15, 3.76 -0.02, 15 0 M0 15 C0.01 3.8, 5.92 1.28, 15 0" stroke="#1971c2" stroke-width="1" fill="none"></path></g><g transform="translate(725.9459094074926 431.50247851512904) rotate(0 137.5198974609375 25)"><text x="137.5198974609375" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">4. Update the voice credit </text><text x="137.5198974609375" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">balance in the state leaf</text></g><g stroke-linecap="round" transform="translate(1120.6524440167136 413.7371993584802) rotate(0 171.64961777213057 30)"><path d="M15 0 C86.13 2.47, 158.04 0.97, 328.3 0 M15 0 C110.88 0.37, 208.36 0.71, 328.3 0 M328.3 0 C337.55 0.7, 341.53 5.8, 343.3 15 M328.3 0 C340.4 0.61, 341.64 3.6, 343.3 15 M343.3 15 C343.88 24.65, 341.08 34.01, 343.3 45 M343.3 15 C343.26 26.84, 342.39 37.58, 343.3 45 M343.3 45 C344.3 55.64, 337.18 59.81, 328.3 60 M343.3 45 C343.66 53.91, 339.46 61.89, 328.3 60 M328.3 60 C209.33 61.46, 89.29 60.21, 15 60 M328.3 60 C210.56 62.13, 93.52 61.67, 15 60 M15 60 C6.63 61.53, -0.35 56.74, 0 45 M15 60 C3.14 61.66, 1.58 56.88, 0 45 M0 45 C-0.62 36.8, -0.36 29.49, 0 15 M0 45 C-0.64 37.9, 0.13 30.71, 0 15 M0 15 C0.54 3.64, 3.83 -1.97, 15 0 M0 15 C0.15 3.16, 5.44 -0.15, 15 0" stroke="#1971c2" stroke-width="1" fill="none"></path></g><g transform="translate(1148.3321826384536 418.7371993584802) rotate(0 143.96987915039062 25)"><text x="143.96987915039062" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">hash(pubKeyX, pubKeyY, </text><text x="143.96987915039062" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">newCreditBalance, timestamp)</text></g><g stroke-linecap="round"><g transform="translate(1052.4157563221893 449.5272260217139) rotate(0 23.866138307756728 0.9130208548290284)"><path d="M-0.46 0.3 C7.49 0.71, 39.38 1.9, 47.44 2.13 M0.3 -0.01 C8.46 0.26, 40.63 0.95, 48.52 1.32" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1052.4157563221893 449.5272260217139) rotate(0 23.866138307756728 0.9130208548290284)"><path d="M25.83 8.76 C32.05 6.47, 37.7 5.48, 48.52 1.32 M25.83 8.76 C32.09 6.59, 38.4 4.87, 48.52 1.32" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1052.4157563221893 449.5272260217139) rotate(0 23.866138307756728 0.9130208548290284)"><path d="M26.36 -7.57 C32.4 -5.79, 37.92 -2.73, 48.52 1.32 M26.36 -7.57 C32.52 -5.28, 38.68 -2.54, 48.52 1.32" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round" transform="translate(691.7991762853402 506.1734722387064) rotate(0 171.64961777213057 55)"><path d="M27.5 0 C130.46 -0.14, 230.01 0.57, 315.8 0 M27.5 0 C113.29 1.59, 200.19 1.98, 315.8 0 M315.8 0 C334.62 0.3, 343.16 9.8, 343.3 27.5 M315.8 0 C332.36 0.81, 342.05 6.99, 343.3 27.5 M343.3 27.5 C344.92 45.6, 342.12 60.1, 343.3 82.5 M343.3 27.5 C343.49 39, 343.42 51.83, 343.3 82.5 M343.3 82.5 C342.95 100.15, 335.73 108.38, 315.8 110 M343.3 82.5 C343.08 103.1, 332.72 109.16, 315.8 110 M315.8 110 C240.14 107.7, 163.47 108.74, 27.5 110 M315.8 110 C232.73 110.45, 148.07 110.9, 27.5 110 M27.5 110 C10.87 109.65, 1.07 100.62, 0 82.5 M27.5 110 C10.53 109.56, 2.05 101.42, 0 82.5 M0 82.5 C0.36 68.48, 0.25 55.68, 0 27.5 M0 82.5 C-1.22 70.07, 0.12 57.67, 0 27.5 M0 27.5 C-1.12 9.05, 9.32 -0.25, 27.5 0 M0 27.5 C1.43 8.81, 7.45 2.17, 27.5 0" stroke="#1971c2" stroke-width="1" fill="none"></path></g><g transform="translate(710.1989161277833 511.1734722387064) rotate(0 153.2498779296875 50)"><text x="153.2498779296875" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">5. Get the path indices (to </text><text x="153.2498779296875" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">locate the leaf in the quinary </text><text x="153.2498779296875" y="50" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">tree) using </text><text x="153.2498779296875" y="75" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">QuinGeneratePathIndices</text></g><g stroke-linecap="round" transform="translate(691.4589200661493 623.0218739641718) rotate(0 171.64961777213057 42.5)"><path d="M21.25 0 C109.76 0.4, 195.65 2, 322.05 0 M21.25 0 C135.39 1.56, 250.66 2.19, 322.05 0 M322.05 0 C337.56 0.2, 341.62 7.11, 343.3 21.25 M322.05 0 C335.99 1.25, 342.57 8.29, 343.3 21.25 M343.3 21.25 C344.23 35.63, 345.04 49.3, 343.3 63.75 M343.3 21.25 C344.18 31.29, 343.57 41.02, 343.3 63.75 M343.3 63.75 C344.72 76.29, 334.86 83.85, 322.05 85 M343.3 63.75 C342.99 77.96, 334.04 86.36, 322.05 85 M322.05 85 C208.7 84.47, 97.57 84.69, 21.25 85 M322.05 85 C249.75 84.32, 176.6 85.25, 21.25 85 M21.25 85 C7.11 85.76, -0.21 77.71, 0 63.75 M21.25 85 C7.33 84.29, -0.04 79.03, 0 63.75 M0 63.75 C-0.77 50.56, -1 38.42, 0 21.25 M0 63.75 C-0.33 54.22, -0.32 45.32, 0 21.25 M0 21.25 C1.21 6.21, 8.52 0.92, 21.25 0 M0 21.25 C-0.35 5.19, 8.57 -0.38, 21.25 0" stroke="#1971c2" stroke-width="1" fill="none"></path></g><g transform="translate(701.438661739647 628.0218739641718) rotate(0 161.6698760986328 37.5)"><text x="161.6698760986328" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">6. Generate a Merkle proof for </text><text x="161.6698760986328" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">the leaf using </text><text x="161.6698760986328" y="50" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">QuinTreeInclusionProof</text></g><g stroke-linecap="round" transform="translate(701.9331406802461 729.7829336723412) rotate(0 171.64961777213057 55)"><path d="M27.5 0 C97.44 1.54, 169.33 -0.04, 315.8 0 M27.5 0 C106.61 -1.3, 185.88 -0.79, 315.8 0 M315.8 0 C335.14 -0.95, 342.77 9.46, 343.3 27.5 M315.8 0 C336.06 0.93, 344.98 10.74, 343.3 27.5 M343.3 27.5 C341.86 37.97, 344.82 50.44, 343.3 82.5 M343.3 27.5 C343.25 47.17, 343.32 65.67, 343.3 82.5 M343.3 82.5 C343.84 101.26, 332.18 109.13, 315.8 110 M343.3 82.5 C343.73 100.79, 335.3 111.73, 315.8 110 M315.8 110 C244.41 108.65, 173.58 108.53, 27.5 110 M315.8 110 C205.82 109.19, 94.43 109.61, 27.5 110 M27.5 110 C9.72 111.43, 0.95 99.13, 0 82.5 M27.5 110 C11.45 109.15, -2.17 102.37, 0 82.5 M0 82.5 C0.04 62.23, -1.21 40.82, 0 27.5 M0 82.5 C-0.26 71.2, 0.44 59.03, 0 27.5 M0 27.5 C-0.73 8.95, 8.99 0.05, 27.5 0 M0 27.5 C-1.55 9.58, 9.84 0.92, 27.5 0" stroke="#1971c2" stroke-width="1" fill="none"></path></g><g transform="translate(712.5028939504235 734.7829336723412) rotate(0 161.07986450195312 50)"><text x="161.07986450195312" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">7. Extract the root from </text><text x="161.07986450195312" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">QuinTreeInclusionProof and wire </text><text x="161.07986450195312" y="50" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">to the output signal </text><text x="161.07986450195312" y="75" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1971c2" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">newStateRoot</text></g></svg>